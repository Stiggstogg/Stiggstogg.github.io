var e=Object.defineProperty,t=(t,i,o)=>((t,i,o)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[i]=o)(t,"symbol"!=typeof i?i+"":i,o);import{p as i}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const o=""+new URL("logo-BvUlwMDO.png",import.meta.url).href;class s extends i.Scene{constructor(){super("Boot")}preload(){this.load.image("logo",o)}create(){this.scene.start("Loading")}}const n=new class{constructor(){t(this,"gameTitle"),t(this,"gameWidth"),t(this,"gameHeight"),t(this,"textStyles"),t(this,"playerSpeed"),t(this,"fadeInOutTime"),t(this,"joystickThreshold"),this.gameTitle="My CV",this.gameWidth=320,this.gameHeight=152,this.playerSpeed=50,this.joystickThreshold=.2,this.fadeInOutTime=1e3,this.textStyles=[],this.textStyles.push({fontFamily:"Orbitron",fontSize:"100px",color:"#FFE500",fontStyle:"bold"})}},r=""+new URL("tilemap-B2Mn9jNf.png",import.meta.url).href,a=""+new URL("frame-DKYb3lJ0.png",import.meta.url).href,l=""+new URL("button-DW7CW5Tm.png",import.meta.url).href,p={questions:[{question:"When did he start his studies?",answers:["2001","2006","2011"],correct:1},{question:"Which chiral molecule did he study?",answers:["CDBrFI","Water","CHBrClF"],correct:0},{question:"From which Greek word does the word 'chiral' come from?",answers:["Foot","Head","Hand"],correct:2},{question:"When did he start to do customer support for titration applications?",answers:["2002","2011","2014"],correct:2},{question:"What did he manage as a product manager starting in 2018?",answers:["Software","Farm","Amusement Park"],correct:0},{question:"What can be measured in wine using titration?",answers:["Color","Acidity","Temperature"],correct:1},{question:"What does he do in his free time?",answers:["Cycling","Weight Lifting","Game Dev."],correct:2},{question:"What kind of competitions does he join in his free time?",answers:["Olympics","Game Jams","Bake Offs"],correct:1},{question:"How much does a curling stone weigh?",answers:["20 kg","22 kg","25 kg"],correct:0}]},d=""+new URL("minogram_6x10-DTDHrpY2.png",import.meta.url).href,c=""+new URL("minogram_6x10-BW1a4pJc.xml",import.meta.url).href,h={compressionlevel:-1,height:19,infinite:!1,layers:[{data:[49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,50,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49,49],height:19,id:2,name:"Background",opacity:1,type:"tilelayer",visible:!0,width:40,x:0,y:0},{data:[2,3,3,3,3,4,1,1,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,1,2,3,7,3,7,3,3,3,3,3,3,4,14,41,34,41,41,16,1,1,1,14,41,41,29,41,41,29,41,41,29,41,41,29,41,41,29,41,16,1,14,30,19,0,19,30,41,41,41,41,41,16,14,0,0,0,0,16,13,1,1,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,1,14,0,31,0,31,0,0,0,0,0,0,16,14,0,0,0,0,16,1,1,1,14,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,16,13,14,0,0,0,0,0,0,0,0,0,0,16,14,0,0,0,0,16,1,1,1,14,0,0,0,83,0,0,0,0,0,0,0,0,0,0,0,0,16,1,14,0,0,0,0,0,0,0,0,0,0,16,14,0,0,0,0,16,1,1,1,14,0,0,0,0,0,0,0,0,0,0,0,0,83,0,0,0,16,1,26,27,27,27,27,27,27,27,6,0,0,16,14,0,0,0,0,16,1,25,1,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,3,3,3,3,3,7,3,3,3,18,0,0,16,14,0,0,0,0,16,1,1,1,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,41,41,9,41,41,19,41,41,41,60,0,0,16,14,0,0,0,0,16,1,1,1,14,0,0,0,0,0,0,5,27,27,27,27,6,0,0,0,0,0,0,0,33,0,0,31,0,0,0,0,0,0,16,14,0,0,0,0,16,1,1,1,14,0,0,0,0,0,0,16,1,1,1,1,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,14,0,0,0,0,17,3,3,3,18,0,0,0,0,0,0,16,1,25,1,1,14,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,16,14,0,0,0,0,58,41,21,41,60,0,0,0,0,0,0,16,1,1,1,1,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,14,0,0,0,0,0,0,33,0,0,0,0,83,0,0,0,16,1,1,1,13,14,64,0,0,0,5,27,27,27,27,27,27,27,6,0,0,0,0,16,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,3,3,3,3,18,76,0,0,0,16,1,13,1,1,1,1,1,14,0,0,0,0,16,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,29,41,41,30,60,0,0,0,0,16,1,1,1,1,1,1,25,14,0,0,83,0,16,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,3,3,3,3,3,3,3,18,0,0,0,0,16,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,74,0,0,0,0,0,0,0,58,41,41,41,41,41,41,41,60,0,0,0,0,16,14,83,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],height:19,id:3,name:"Castle",opacity:1,type:"tilelayer",visible:!0,width:40,x:0,y:0},{draworder:"topdown",id:5,name:"Interaction",objects:[{gid:100,height:16,id:3,name:"hobbies",properties:[{name:"dialogText",type:"string",value:'"Ah, wondering how he the alchemist spends his free time? When not immersed in his craft, he plays music and conjures his own worlds through web game development / game jams. He even battles on the icy fields of curling.\n\nDid you know a curling stone weighs nearly 20 kg?"'},{name:"dialogTitle",type:"string",value:"Hobbies"}],rotation:0,type:"",visible:!0,width:16,x:576,y:272},{gid:85,height:16,id:2,name:"experience",properties:[{name:"dialogText",type:"string",value:'"Ah, curious about the alchemist’s deeds? In 2014, he devised potent titration applications and supported customers. By 2018, he became the product manager of a laboratory software.\n\nDid you know that titration can be used to measure the acidity of wine?"'},{name:"dialogTitle",type:"string",value:"Experience"}],rotation:0,type:"",visible:!0,width:16,x:288,y:128},{gid:113,height:16,id:7,name:"education",properties:[{name:"dialogText",type:"string",value:"\"Ah, yes, the alchemist! Rumor has it he earned his Bachelor and Master of Science in Chemistry between 2006 and 2011, all while dabbling in wild experiments with a mysterious chiral molecule called CDBrFI.\n\nDid you know the term 'chiral' actually comes from the Greek word for hand, 'cheir'?\""},{name:"dialogTitle",type:"string",value:"Education"}],rotation:0,type:"",visible:!0,width:16,x:16,y:208},{gid:86,height:16,id:4,name:"player",rotation:0,type:"",visible:!0,width:16,x:32,y:48},{gid:110,height:16,id:8,name:"quizmaster",properties:[{name:"dialogText",type:"string",value:"Quiz"},{name:"dialogTitle",type:"string",value:"Quiz"}],rotation:0,type:"",visible:!0,width:16,x:496,y:48},{gid:10,height:16,id:10,name:"exit",rotation:0,type:"",visible:!0,width:16,x:496,y:32}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:6,nextobjectid:11,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.10.2",tileheight:16,tilesets:[{columns:12,firstgid:1,image:"../images/tilemap.png",imageheight:186,imagewidth:203,margin:0,name:"Tiny Dungeon",spacing:1,tilecount:132,tileheight:16,tiles:[{id:0,properties:[{name:"collision",type:"bool",value:!1}]},{id:1,properties:[{name:"collision",type:"bool",value:!0}]},{id:2,properties:[{name:"collision",type:"bool",value:!0}]},{id:3,properties:[{name:"collision",type:"bool",value:!0}]},{id:4,properties:[{name:"collision",type:"bool",value:!0}]},{id:5,properties:[{name:"collision",type:"bool",value:!0}]},{id:6,properties:[{name:"collision",type:"bool",value:!0}]},{id:7,properties:[{name:"collision",type:"bool",value:!0}]},{id:8,properties:[{name:"collision",type:"bool",value:!0}]},{id:9,properties:[{name:"collision",type:"bool",value:!1}]},{id:10,properties:[{name:"collision",type:"bool",value:!1}]},{id:11,properties:[{name:"collision",type:"bool",value:!1}]},{id:12,properties:[{name:"collision",type:"bool",value:!1}]},{id:13,properties:[{name:"collision",type:"bool",value:!0}]},{id:14,properties:[{name:"collision",type:"bool",value:!0}]},{id:15,properties:[{name:"collision",type:"bool",value:!0}]},{id:16,properties:[{name:"collision",type:"bool",value:!0}]},{id:17,properties:[{name:"collision",type:"bool",value:!0}]},{id:18,properties:[{name:"collision",type:"bool",value:!0}]},{id:19,properties:[{name:"collision",type:"bool",value:!0}]},{id:20,properties:[{name:"collision",type:"bool",value:!0}]},{id:21,properties:[{name:"collision",type:"bool",value:!1}]},{id:22,properties:[{name:"collision",type:"bool",value:!1}]},{id:23,properties:[{name:"collision",type:"bool",value:!1}]},{id:24,properties:[{name:"collision",type:"bool",value:!1}]},{id:25,properties:[{name:"collision",type:"bool",value:!0}]},{id:26,properties:[{name:"collision",type:"bool",value:!0}]},{id:27,properties:[{name:"collision",type:"bool",value:!0}]},{id:28,properties:[{name:"collision",type:"bool",value:!0}]},{id:29,properties:[{name:"collision",type:"bool",value:!0}]},{id:30,properties:[{name:"collision",type:"bool",value:!1}]},{id:31,properties:[{name:"collision",type:"bool",value:!0}]},{id:32,properties:[{name:"collision",type:"bool",value:!1}]},{id:33,properties:[{name:"collision",type:"bool",value:!0}]},{id:34,properties:[{name:"collision",type:"bool",value:!1}]},{id:35,properties:[{name:"collision",type:"bool",value:!1}]},{id:36,properties:[{name:"collision",type:"bool",value:!1}]},{id:37,properties:[{name:"collision",type:"bool",value:!1}]},{id:38,properties:[{name:"collision",type:"bool",value:!1}]},{id:39,properties:[{name:"collision",type:"bool",value:!1}]},{id:40,properties:[{name:"collision",type:"bool",value:!0}]},{id:41,properties:[{name:"collision",type:"bool",value:!0}]},{id:42,properties:[{name:"collision",type:"bool",value:!1}]},{id:43,properties:[{name:"collision",type:"bool",value:!0}]},{id:44,properties:[{name:"collision",type:"bool",value:!0}]},{id:45,properties:[{name:"collision",type:"bool",value:!1}]},{id:46,properties:[{name:"collision",type:"bool",value:!1}]},{id:47,properties:[{name:"collision",type:"bool",value:!1}]},{id:48,properties:[{name:"collision",type:"bool",value:!1}]},{id:49,properties:[{name:"collision",type:"bool",value:!1}]},{id:50,properties:[{name:"collision",type:"bool",value:!1}]},{id:51,properties:[{name:"collision",type:"bool",value:!1}]},{id:52,properties:[{name:"collision",type:"bool",value:!1}]},{id:53,properties:[{name:"collision",type:"bool",value:!1}]},{id:54,properties:[{name:"collision",type:"bool",value:!0}]},{id:55,properties:[{name:"collision",type:"bool",value:!0}]},{id:56,properties:[{name:"collision",type:"bool",value:!0}]},{id:57,properties:[{name:"collision",type:"bool",value:!0}]},{id:58,properties:[{name:"collision",type:"bool",value:!0}]},{id:59,properties:[{name:"collision",type:"bool",value:!0}]},{id:60,properties:[{name:"collision",type:"bool",value:!0}]},{id:61,properties:[{name:"collision",type:"bool",value:!0}]},{id:62,properties:[{name:"collision",type:"bool",value:!0}]},{id:63,properties:[{name:"collision",type:"bool",value:!0}]},{id:64,properties:[{name:"collision",type:"bool",value:!0}]},{id:65,properties:[{name:"collision",type:"bool",value:!0}]},{id:66,properties:[{name:"collision",type:"bool",value:!0}]},{id:67,properties:[{name:"collision",type:"bool",value:!0}]},{id:68,properties:[{name:"collision",type:"bool",value:!0}]},{id:69,properties:[{name:"collision",type:"bool",value:!0}]},{id:70,properties:[{name:"collision",type:"bool",value:!0}]},{id:71,properties:[{name:"collision",type:"bool",value:!0}]},{id:72,properties:[{name:"collision",type:"bool",value:!0}]},{id:73,properties:[{name:"collision",type:"bool",value:!0}]},{id:74,properties:[{name:"collision",type:"bool",value:!0}]},{id:75,properties:[{name:"collision",type:"bool",value:!0}]},{id:76,properties:[{name:"collision",type:"bool",value:!0}]},{id:77,properties:[{name:"collision",type:"bool",value:!0}]},{id:78,properties:[{name:"collision",type:"bool",value:!0}]},{id:79,properties:[{name:"collision",type:"bool",value:!0}]},{id:80,properties:[{name:"collision",type:"bool",value:!0}]},{id:81,properties:[{name:"collision",type:"bool",value:!0}]},{id:82,properties:[{name:"collision",type:"bool",value:!0}]},{id:83,properties:[{name:"collision",type:"bool",value:!0}]},{id:84,properties:[{name:"collision",type:"bool",value:!0}]},{id:85,properties:[{name:"collision",type:"bool",value:!0}]},{id:86,properties:[{name:"collision",type:"bool",value:!0}]},{id:87,properties:[{name:"collision",type:"bool",value:!0}]},{id:88,properties:[{name:"collision",type:"bool",value:!0}]},{id:89,properties:[{name:"collision",type:"bool",value:!0}]},{id:90,properties:[{name:"collision",type:"bool",value:!0}]},{id:91,properties:[{name:"collision",type:"bool",value:!0}]},{id:92,properties:[{name:"collision",type:"bool",value:!0}]},{id:93,properties:[{name:"collision",type:"bool",value:!0}]},{id:94,properties:[{name:"collision",type:"bool",value:!0}]},{id:95,properties:[{name:"collision",type:"bool",value:!0}]},{id:96,properties:[{name:"collision",type:"bool",value:!0}]},{id:97,properties:[{name:"collision",type:"bool",value:!0}]},{id:98,properties:[{name:"collision",type:"bool",value:!0}]},{id:99,properties:[{name:"collision",type:"bool",value:!0}]},{id:100,properties:[{name:"collision",type:"bool",value:!0}]},{id:101,properties:[{name:"collision",type:"bool",value:!0}]},{id:102,properties:[{name:"collision",type:"bool",value:!0}]},{id:103,properties:[{name:"collision",type:"bool",value:!0}]},{id:104,properties:[{name:"collision",type:"bool",value:!0}]},{id:105,properties:[{name:"collision",type:"bool",value:!0}]},{id:106,properties:[{name:"collision",type:"bool",value:!0}]},{id:107,properties:[{name:"collision",type:"bool",value:!0}]},{id:108,properties:[{name:"collision",type:"bool",value:!0}]},{id:109,properties:[{name:"collision",type:"bool",value:!0}]},{id:110,properties:[{name:"collision",type:"bool",value:!0}]},{id:111,properties:[{name:"collision",type:"bool",value:!0}]},{id:112,properties:[{name:"collision",type:"bool",value:!0}]},{id:113,properties:[{name:"collision",type:"bool",value:!0}]},{id:114,properties:[{name:"collision",type:"bool",value:!0}]},{id:115,properties:[{name:"collision",type:"bool",value:!0}]},{id:116,properties:[{name:"collision",type:"bool",value:!0}]},{id:117,properties:[{name:"collision",type:"bool",value:!0}]},{id:118,properties:[{name:"collision",type:"bool",value:!0}]},{id:119,properties:[{name:"collision",type:"bool",value:!0}]},{id:120,properties:[{name:"collision",type:"bool",value:!0}]},{id:121,properties:[{name:"collision",type:"bool",value:!0}]},{id:122,properties:[{name:"collision",type:"bool",value:!0}]},{id:123,properties:[{name:"collision",type:"bool",value:!0}]},{id:124,properties:[{name:"collision",type:"bool",value:!0}]},{id:125,properties:[{name:"collision",type:"bool",value:!0}]},{id:126,properties:[{name:"collision",type:"bool",value:!0}]},{id:127,properties:[{name:"collision",type:"bool",value:!0}]},{id:128,properties:[{name:"collision",type:"bool",value:!0}]},{id:129,properties:[{name:"collision",type:"bool",value:!0}]},{id:130,properties:[{name:"collision",type:"bool",value:!0}]},{id:131,properties:[{name:"collision",type:"bool",value:!0}]}],tilewidth:16}],tilewidth:16,type:"map",version:"1.10",width:40};class u extends i.Scene{constructor(){super("Loading")}init(){this.add.sprite(n.gameWidth/2,n.gameHeight/2,"logo").setScale(.5,.5),this.add.text(n.gameWidth/2,.2*n.gameHeight,"CLOWNGAMING",{fontSize:"70px",color:"#FFFF00",fontStyle:"bold"}).setOrigin(.5),this.add.text(n.gameWidth/2,.73*n.gameHeight,"Loading",{fontSize:"30px",color:"#27FF00"}).setOrigin(.5);const e=this.add.graphics(),t=.3*n.gameWidth,i=.1*t,o=n.gameWidth/2-t/2,s=.8*n.gameHeight-i/2;e.setPosition(o,s),e.fillStyle(16119285,1),e.fillRect(0,0,t,i);const r=this.add.graphics();r.setPosition(o,s),this.load.on("progress",(function(e){r.clear(),r.fillStyle(2621184,1),r.fillRect(0,0,e*t,i)}),this)}preload(){this.load.image("tileMap",r),this.load.image("frame",a),this.load.image("button",l),this.load.spritesheet("spriteSheet",r,{frameWidth:16,frameHeight:16,spacing:1}),this.load.bitmapFont("minogram",d,c),this.load.tilemapTiledJSON("mainLevel",h),this.load.json("questions",p)}create(){this.scene.start("Game")}}const m=(e,t)=>{const i=t.x-e.x,o=t.y-e.y;return Math.sqrt(i*i+o*o)},y=e=>e*(Math.PI/180),g=new Map,f=e=>{g.has(e)&&clearTimeout(g.get(e)),g.set(e,setTimeout(e,100))},v=(e,t,i)=>{const o=t.split(/[ ,]+/g);let s;for(let n=0;n<o.length;n+=1)s=o[n],e.addEventListener?e.addEventListener(s,i,!1):e.attachEvent&&e.attachEvent(s,i)},b=(e,t,i)=>{const o=t.split(/[ ,]+/g);let s;for(let n=0;n<o.length;n+=1)s=o[n],e.removeEventListener?e.removeEventListener(s,i):e.detachEvent&&e.detachEvent(s,i)},x=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),w=()=>({x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}),O=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},T=(e,t,i)=>{const o=k(e);for(let s in o)if(o.hasOwnProperty(s))if("string"==typeof t)o[s]=t+" "+i;else{let e="";for(let o=0,s=t.length;o<s;o+=1)e+=t[o]+" "+i+", ";o[s]=e.slice(0,-2)}return o},k=e=>{const t={};return t[e]="",["webkit","Moz","o"].forEach((function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""})),t},D=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},I=(e,t)=>{if(e.length)for(let i=0,o=e.length;i<o;i+=1)t(e[i]);else t(e)};var _,E=!!("ontouchstart"in window),C=!!window.PointerEvent,S=!!window.MSPointerEvent,z={start:"mousedown",move:"mousemove",end:"mouseup"},P={};function M(){}function j(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=j.id,j.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function W(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=W.id,W.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),"static"!==i.options.mode&&"semi"!==i.options.mode||(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);const o=getComputedStyle(i.options.zone.parentElement);return o&&"flex"===o.display&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}function N(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=w(),t.config(e),t.prepareCollections();var i=function(){var e;t.collections.forEach((function(i){i.forEach((function(i){e=i.el.getBoundingClientRect(),i.position={x:t.scroll.x+e.left,y:t.scroll.y+e.top}}))}))};v(window,"resize",(function(){f(i)}));var o=function(){t.scroll=w()};return v(window,"scroll",(function(){f(o)})),t.collections}C?_={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:S?_={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:E?(_={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},P=z):_=z,M.prototype.on=function(e,t){var i,o=this,s=e.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var n=0;n<s.length;n+=1)i=s[n],o._handlers_[i]=o._handlers_[i]||[],o._handlers_[i].push(t);return o},M.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},void 0===e?i._handlers_={}:void 0===t?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i},M.prototype.trigger=function(e,t){var i,o=this,s=e.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var n=0;n<s.length;n+=1)i=s[n],o._handlers_[i]&&o._handlers_[i].length&&o._handlers_[i].forEach((function(e){e.call(o,{type:i,target:o},t)}))},M.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=((e,t)=>{const i={};for(let o in e)e.hasOwnProperty(o)&&t.hasOwnProperty(o)?i[o]=t[o]:e.hasOwnProperty(o)&&(i[o]=e[o]);return i})(t.options,e))},M.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){"function"==typeof i["on"+t]?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},v(e,_[t],i._domHandlers_[t]),P[t]&&v(e,P[t],i._domHandlers_[t]),i},M.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},b(e,_[t],i._domHandlers_[t]),P[t]&&b(e,P[t],i._domHandlers_[t]),delete i._domHandlers_[t],this},j.prototype=new M,j.constructor=j,j.id=0,j.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},j.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=((e,t)=>{const i=k("borderRadius");for(let o in i)i.hasOwnProperty(o)&&(i[o]="50%");return i})(),i=T("transition","opacity",e),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},D(o.el,i),"circle"===this.options.shape&&D(o.back,t),D(o.front,t),this.applyStyles(o),this},j.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this},j.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},j.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},j.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},j.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout((function(){t.ui.el.style.opacity=1}),0),t.showTimeout=setTimeout((function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)}),t.options.fadeTime)),t},j.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout((function(){var i="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=i,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)}),t.options.fadeTime),t.options.restJoystick){const i=t.options.restJoystick,o={};o.x=!0===i||!1!==i.x?0:t.instance.frontPosition.x,o.y=!0===i||!1!==i.y?0:t.instance.frontPosition.y,t.setPosition(e,o)}return t},j.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var o=i.options.fadeTime+"ms",s={};s.front=T("transition",["transform"],o);var n={front:{}};n.front={transform:"translate("+i.frontPosition.x+"px,"+i.frontPosition.y+"px)"},i.applyStyles(s),i.applyStyles(n),i.restTimeout=setTimeout((function(){"function"==typeof e&&e.call(i),i.restCallback()}),i.options.fadeTime)},j.prototype.restCallback=function(){var e=this,t={};t.front=T("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},j.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},j.prototype.computeDirection=function(e){var t,i,o,s=e.angle.radian,n=Math.PI/4,r=Math.PI/2;if(s>n&&s<3*n&&!e.lockX?t="up":s>-n&&s<=n&&!e.lockY?t="left":s>3*-n&&s<=-n&&!e.lockX?t="down":e.lockY||(t="right"),e.lockY||(i=s>-r&&s<r?"left":"right"),e.lockX||(o=s>0?"up":"down"),e.force>this.options.threshold){var a,l={};for(a in this.direction)this.direction.hasOwnProperty(a)&&(l[a]=this.direction[a]);var p={};for(a in this.direction={x:i,y:o,angle:t},e.direction=this.direction,l)l[a]===this.direction[a]&&(p[a]=!0);if(p.x&&p.y&&p.angle)return e;p.x&&p.y||this.trigger("plain",e),p.x||this.trigger("plain:"+i,e),p.y||this.trigger("plain:"+o,e),p.angle||this.trigger("dir dir:"+t,e)}else this.resetDirection();return e},W.prototype=new M,W.constructor=W,W.id=0,W.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var i=0,o=t.length;i<o;i+=1)if(t[i].identifier===e)return t[i];return!1}},W.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},W.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}},W.prototype.createNipple=function(e,t){var i=this,o=i.manager.scroll,s={},n=i.options,r=i.parentIsFlex?o.x:o.x+i.box.left,a=i.parentIsFlex?o.y:o.y+i.box.top;if(e.x&&e.y)s={x:e.x-r,y:e.y-a};else if(e.top||e.right||e.bottom||e.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left,l.style.position="absolute",n.zone.appendChild(l);var p=l.getBoundingClientRect();n.zone.removeChild(l),s=e,e={x:p.left+o.x,y:p.top+o.y}}var d=new j(i,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:t,position:e,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape});return n.dataOnly||(O(d.ui.el,s),O(d.ui.front,d.frontPosition)),i.nipples.push(d),i.trigger("added "+d.identifier+":added",d),i.manager.trigger("added "+d.identifier+":added",d),i.bindNipple(d),d},W.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},W.prototype.bindNipple=function(e){var t,i=this,o=function(e,o){t=e.type+" "+o.id+":"+e.type,i.trigger(t,o)};e.on("destroyed",i.onDestroyed.bind(i)),e.on("shown hidden rested dir plain",o),e.on("dir:up dir:right dir:down dir:left",o),e.on("plain:up plain:right plain:down plain:left",o)},W.prototype.pressureFn=function(e,t,i){var o=this,s=0;clearInterval(o.pressureIntervals[i]),o.pressureIntervals[i]=setInterval(function(){var i=e.force||e.pressure||e.webkitForce||0;i!==s&&(t.trigger("pressure",i),o.trigger("pressure "+t.identifier+":pressure",i),s=i)}.bind(o),100)},W.prototype.onstart=function(e){var t=this,i=t.options,o=e;return e=x(e),t.updateBox(),I(e,(function(s){t.actives.length<i.maxNumberOfNipples?t.processOnStart(s):o.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach((function(i){if(Object.values(o.touches).findIndex((function(e){return e.identifier===i}))<0){var s=[e[0]];s.identifier=i,t.processOnEnd(s)}})),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(s))})),t.manager.bindDocument(),!1},W.prototype.processOnStart=function(e){var t,i=this,o=i.options,s=i.manager.getIdentifier(e),n=e.force||e.pressure||e.webkitForce||0,r={x:e.pageX,y:e.pageY},a=i.getOrCreate(s,r);a.identifier!==s&&i.manager.removeIdentifier(a.identifier),a.identifier=s;var l=function(t){t.trigger("start",t),i.trigger("start "+t.id+":start",t),t.show(),n>0&&i.pressureFn(e,t,t.identifier),i.processOnMove(e)};if((t=i.idles.indexOf(a))>=0&&i.idles.splice(t,1),i.actives.push(a),i.ids.push(a.identifier),"semi"!==o.mode)l(a);else{if(!(m(r,a.position)<=o.catchDistance))return a.destroy(),void i.processOnStart(e);l(a)}return a},W.prototype.getOrCreate=function(e,t){var i,o=this,s=o.options;return/(semi|static)/.test(s.mode)?(i=o.idles[0])?(o.idles.splice(0,1),i):"semi"===s.mode?o.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):i=o.createNipple(t,e)},W.prototype.processOnMove=function(e){var t=this,i=t.options,o=t.manager.getIdentifier(e),s=t.nipples.get(o),n=t.manager.scroll;if((e=>isNaN(e.buttons)?0!==e.pressure:0!==e.buttons)(e)){if(!s)return console.error("Found zombie joystick with ID "+o),void t.manager.removeIdentifier(o);if(i.dynamicPage){var r=s.el.getBoundingClientRect();s.position={x:n.x+r.left,y:n.y+r.top}}s.identifier=o;var a=s.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=s.position.y),i.lockY&&(l.x=s.position.x);var p,d,c=m(l,s.position),h=((e,t)=>{const i=t.x-e.x,o=t.y-e.y;return Math.atan2(o,i)*(180/Math.PI)})(l,s.position),u=y(h),g=c/a,f={distance:c,position:l};if("circle"===s.options.shape?(p=Math.min(c,a),d=((e,t,i)=>{const o={x:0,y:0};return i=y(i),o.x=e.x-t*Math.cos(i),o.y=e.y-t*Math.sin(i),o})(s.position,p,h)):(d=((e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)}))(l,s.position,a),p=m(d,s.position)),i.follow){if(c>a){let e=l.x-d.x,i=l.y-d.y;s.position.x+=e,s.position.y+=i,s.el.style.top=s.position.y-(t.box.top+n.y)+"px",s.el.style.left=s.position.x-(t.box.left+n.x)+"px",c=m(l,s.position)}}else l=d,c=p;var v=l.x-s.position.x,b=l.y-s.position.y;s.frontPosition={x:v,y:b},i.dataOnly||(s.ui.front.style.transform="translate("+v+"px,"+b+"px)");var x={identifier:s.identifier,position:l,force:g,pressure:e.force||e.pressure||e.webkitForce||0,distance:c,angle:{radian:u,degree:h},vector:{x:v/a,y:-b/a},raw:f,instance:s,lockX:i.lockX,lockY:i.lockY};(x=s.computeDirection(x)).angle={radian:y(180-h),degree:180-h},s.trigger("move",x),t.trigger("move "+s.id+":move",x)}else this.processOnEnd(e)},W.prototype.processOnEnd=function(e){var t=this,i=t.options,o=t.manager.getIdentifier(e),s=t.nipples.get(o),n=t.manager.removeIdentifier(s.identifier);s&&(i.dataOnly||s.hide((function(){"dynamic"===i.mode&&(s.trigger("removed",s),t.trigger("removed "+s.id+":removed",s),t.manager.trigger("removed "+s.id+":removed",s),s.destroy())})),clearInterval(t.pressureIntervals[s.identifier]),s.resetDirection(),s.trigger("end",s),t.trigger("end "+s.id+":end",s),t.ids.indexOf(s.identifier)>=0&&t.ids.splice(t.ids.indexOf(s.identifier),1),t.actives.indexOf(s)>=0&&t.actives.splice(t.actives.indexOf(s),1),/(semi|static)/.test(i.mode)?t.idles.push(s):t.nipples.indexOf(s)>=0&&t.nipples.splice(t.nipples.indexOf(s),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[n.id]=n.identifier))},W.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()},W.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach((function(e){e.destroy()})),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()},N.prototype=new M,N.constructor=N,N.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every((function(e){return!(i=e.get(t))})),i}},N.prototype.create=function(e){return this.createCollection(e)},N.prototype.createCollection=function(e){var t=this,i=new W(t,e);return t.bindCollection(i),t.collections.push(i),i},N.prototype.bindCollection=function(e){var t,i=this,o=function(e,o){t=e.type+" "+o.id+":"+e.type,i.trigger(t,o)};e.on("destroyed",i.onDestroyed.bind(i)),e.on("shown hidden rested dir plain",o),e.on("dir:up dir:right dir:down dir:left",o),e.on("plain:up plain:right plain:down plain:left",o)},N.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},N.prototype.unbindDocument=function(e){var t=this;Object.keys(t.ids).length&&!0!==e||(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},N.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},N.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t},N.prototype.onmove=function(e){return this.onAny("move",e),!1},N.prototype.onend=function(e){return this.onAny("end",e),!1},N.prototype.oncancel=function(e){return this.onAny("end",e),!1},N.prototype.onAny=function(e,t){var i,o=this,s="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=x(t);var n=function(e,t,i){i.ids.indexOf(t)>=0&&(i[s](e),e._found_=!0)};return I(t,(function(e){i=o.getIdentifier(e),I(o.collections,n.bind(null,e,i)),e._found_||o.removeIdentifier(i)})),!1},N.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach((function(e){e.destroy()})),e.off()},N.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};const G=new N;class H extends i.Physics.Arcade.Sprite{constructor(e,i,o){super(e,i,o,"spriteSheet",85),t(this,"speed"),e.physics.add.existing(this),this.setCollideWorldBounds(!0),this.speed=n.playerSpeed,this.body.setSize(12,15),this.body.setOffset(2,1)}move(e,t=1){switch(e){case"up":this.setVelocityY(-this.speed*t);break;case"down":this.setVelocityY(this.speed*t);break;case"left":this.setVelocityX(-this.speed*t);break;default:this.setVelocityX(this.speed*t)}}}class A extends i.Physics.Arcade.Image{constructor(e,i,o,s,n,r){super(e,i,o,"spriteSheet",112),t(this,"characterName"),t(this,"dialogTitle"),t(this,"dialogText"),"experience"===s?this.setFrame(84):"hobbies"===s?this.setFrame(99):"quizmaster"===s&&this.setFrame(109),this.characterName=s,this.dialogTitle=n,this.dialogText=r,e.physics.add.existing(this),this.setImmovable(!0)}getDialogTitle(){return this.dialogTitle}getDialogText(){return this.dialogText}}let B=class extends i.Scene{constructor(){super("Game"),t(this,"player"),t(this,"map"),t(this,"castle"),t(this,"keys"),t(this,"characters"),t(this,"joystickManager"),t(this,"joystickActive"),t(this,"gameOver"),t(this,"exit")}create(){this.gameOver=!1,this.scene.launch("GameUI"),this.cameras.main.fadeIn(n.fadeInOutTime),this.setupWorld(),this.setupObjects(),this.addKeys(),this.addJoystick(),this.events.on("dialogClosed",(()=>{this.scene.resume(),this.addJoystick()})),this.events.on("answerCorrect",(()=>{this.characters.filter((e=>"quizmaster"===e.characterName))[0].destroy(),this.events.emit("showDialog","Correct!",'"Well done! You\'ve answered correctly \n\nThe path is now open — go forth!"'),this.player.setVelocity(0),this.joystickManager.destroy(),this.scene.pause()})),this.events.on("answerWrong",(()=>{this.player.setPosition(528,64),this.events.emit("showDialog","Wrong!",'"Wrong answer! You shall not pass!\n\nTry again if you dare!"'),this.player.setVelocity(0),this.joystickManager.destroy(),this.scene.pause()})),this.cameras.main.once("camerafadeincomplete",(()=>{this.showDialog("My little CV Game","Welcome, adventurer! Talk to the three inhabitants of this dungeon to learn more about me. Your goal: Escape by giving the cyclope the correct answer.\nGood luck, and have fun!\n\nMove: WASD, Arrow Keys or virtual touch joystick\nDialogs: SPACE / ENTER or touch / mouse.")}))}update(e,t){this.joystickActive||this.gameOver||(this.player.setVelocity(0),this.keys.DOWN.isDown||this.keys.S.isDown?this.player.move("down"):(this.keys.UP.isDown||this.keys.W.isDown)&&this.player.move("up"),this.keys.LEFT.isDown||this.keys.A.isDown?this.player.move("left"):(this.keys.RIGHT.isDown||this.keys.D.isDown)&&this.player.move("right")),this.characters.forEach((e=>{this.physics.collide(this.player,e)&&("quizmaster"===e.characterName?this.events.emit("showQuizDialog"):this.events.emit("showDialog",e.getDialogTitle(),e.getDialogText()),this.player.setVelocity(0),this.joystickManager.destroy(),this.scene.pause())}))}addKeys(){this.keys=this.input.keyboard.addKeys("DOWN, S, UP, W, LEFT, A, RIGHT, D"),this.input.keyboard.addKey("Enter").on("down",(function(){this.spaceEnterKey()}),this),this.input.keyboard.addKey("Space").on("down",(function(){this.spaceEnterKey()}),this)}spaceEnterKey(){console.log("Space or Enter key pressed!")}addJoystick(){var e;this.joystickActive=!1,this.joystickManager=(e={mode:"dynamic",color:"white",size:100,threshold:n.joystickThreshold},G.create(e)),this.joystickManager.on("move",((e,t)=>{this.gameOver||(this.player.setVelocity(0),t.vector.y<-n.joystickThreshold?this.player.move("down",Math.abs(t.vector.y)):t.vector.y>n.joystickThreshold&&this.player.move("up",Math.abs(t.vector.y)),t.vector.x<-n.joystickThreshold?this.player.move("left",Math.abs(t.vector.x)):t.vector.x>n.joystickThreshold&&this.player.move("right",Math.abs(t.vector.x)))})),this.joystickManager.on("end",(()=>{this.player.setVelocity(0),this.joystickActive=!1})),this.joystickManager.on("start",(()=>{this.joystickActive=!0}))}setupWorld(){var e;this.map=this.make.tilemap({key:"mainLevel"});const t=this.map.addTilesetImage("Tiny Dungeon","tileMap");this.map.createLayer("Background",t),this.castle=this.map.createLayer("Castle",t),null==(e=this.castle)||e.setCollisionByProperty({collision:!0}),this.physics.world.bounds.width=this.map.widthInPixels,this.physics.world.bounds.height=this.map.heightInPixels,this.cameras.main.setBounds(0,0,this.physics.world.bounds.width,this.physics.world.bounds.height)}setupObjects(){var e,t;const i=this.map.getObjectLayer("Interaction").objects,o=i.filter((e=>"player"===e.name))[0];this.player=this.add.existing(new H(this,o.x,o.y)).setOrigin(0,1).setDepth(2),this.cameras.main.startFollow(this.player,!0,1,1),this.physics.add.collider(this.player,this.castle),this.characters=[],["education","experience","hobbies","quizmaster"].forEach((e=>{const t=i.filter((t=>t.name===e))[0],o=t.properties,s=o.filter((e=>"dialogTitle"===e.name))[0].value,n=o.filter((e=>"dialogText"===e.name))[0].value,r=this.add.existing(new A(this,t.x,t.y,e,s,n)).setOrigin(0,1);this.characters.push(r)}));const s=i.filter((e=>"exit"===e.name))[0];this.exit=this.physics.add.image(s.x,s.y,"spriteSheet",9).setOrigin(0,1).setDepth(1),null==(e=this.exit.body)||e.setSize(20,16),null==(t=this.exit.body)||t.setOffset(-2,1),this.physics.add.overlap(this.player,this.exit,(()=>{this.events.emit("exit")})),this.events.once("exit",(()=>{this.player.setVelocity(0),this.joystickManager.destroy(),this.gameOver=!0,this.cameras.main.fadeOut(n.fadeInOutTime)})),this.cameras.main.once("camerafadeoutcomplete",(()=>{this.scene.stop("GameUI"),this.scene.start("GameOver")}))}showDialog(e,t){this.events.emit("showDialog",e,t),this.pauseGameScene()}pauseGameScene(){this.player.setVelocity(0),this.joystickManager.destroy(),this.scene.pause()}};class F extends i.Scene{constructor(){super("GameOver")}create(){this.cameras.main.fadeIn(n.fadeInOutTime),this.cameras.main.once("camerafadeincomplete",(()=>{const e=this.add.bitmapText(n.gameWidth/2,.9*n.gameHeight,"minogram","Click anywhere or SPACE / ENTER to restart the game.",10).setOrigin(.5,.5).setTint(7748406).setAlpha(0);this.tweens.add({targets:e,alpha:1,duration:1e3}),this.addKeys()})),this.cameras.main.setBackgroundColor("#eaa56c"),this.add.bitmapText(n.gameWidth/2,.25*n.gameHeight,"minogram","THE END",30).setOrigin(.5,.5).setTint(2501444),this.add.bitmapText(n.gameWidth/2,.5*n.gameHeight,"minogram","Thank you for playing my little CV game!",20).setOrigin(.5,.5).setTint(7748406).setMaxWidth(.9*n.gameWidth)}addKeys(){var e;null==(e=this.input.keyboard)||e.on("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||this.scene.start("Game")})),this.input.on("pointerdown",(()=>{this.scene.start("Game")}))}}class q extends i.GameObjects.Container{constructor(e){super(e,0,0),t(this,"frame"),t(this,"title"),t(this,"text"),t(this,"textColor"),this.setVisible(!1),this.textColor=7748406,this.frame=new i.GameObjects.Image(e,0,0,"frame").setOrigin(0,0).setDepth(3),this.title=new i.GameObjects.BitmapText(e,n.gameWidth/2,.08*n.gameHeight,"minogram","Title",20).setOrigin(.5,0).setDepth(4).setTint(this.textColor),this.text=new i.GameObjects.BitmapText(e,.025*n.gameWidth,.22*n.gameHeight,"minogram","Text",10).setOrigin(0,0).setDepth(4).setTint(this.textColor),this.text.maxWidth=.95*n.gameWidth,this.add([this.frame,this.title,this.text])}showDialog(e,t){this.title.setText(e),this.text.setText(t),this.setVisible(!0)}hideDialog(){this.scene.scene.get("Game").events.emit("dialogClosed"),this.setVisible(!1)}}class L extends q{constructor(e){super(e),t(this,"button"),t(this,"buttonText"),this.button=new i.GameObjects.Image(e,n.gameWidth/2,.85*n.gameHeight,"button").setOrigin(.5,.5).setDepth(4),this.buttonText=new i.GameObjects.BitmapText(e,this.button.x,this.button.y+1,"minogram","OK",10).setOrigin(.5,.5).setDepth(5).setTint(this.textColor),this.add([this.button,this.buttonText]),this.button.setInteractive(),this.button.on("pointerdown",(()=>{this.hideDialog()}))}}class R extends q{constructor(e){super(e),t(this,"answerButtons"),t(this,"answerTexts"),t(this,"questions"),t(this,"usedQuestions"),t(this,"introText"),this.introText="None shall pass unless you prove your knowledge of the alchemist! Answer my question correctly, or remain trapped forever!",this.answerButtons=[],this.answerTexts=[];for(let t=0;t<3;t++){const o=new i.GameObjects.Image(e,59+98*t,.8*n.gameHeight,"button").setOrigin(.5,.5).setDepth(4);o.setInteractive(),o.on("pointerdown",(()=>{this.emit("answerSelected",t)})),this.answerButtons.push(o);const s=new i.GameObjects.BitmapText(e,this.answerButtons[t].x,this.answerButtons[t].y+1,"minogram","Answer"+t,10).setOrigin(.5,.5).setDepth(5).setTint(this.textColor);this.answerTexts.push(s),this.add([o,s])}this.questions=this.loadQuestions("questions"),this.usedQuestions=[]}showQuizDialog(){const e=this.pickQuestions();this.answerTexts.forEach(((t,i)=>{t.setText(e.answers[i])})),this.off("answerSelected"),this.on("answerSelected",(t=>{this.hideDialog(),e.correct===t?this.scene.scene.get("Game").events.emit("answerCorrect"):this.scene.scene.get("Game").events.emit("answerWrong")})),this.showDialog("Quiz",'"'+this.introText+"\n\n"+e.question+'"')}loadQuestions(e){return this.scene.cache.json.get(e).questions}pickQuestions(){const e=this.questions.filter(((e,t)=>!this.usedQuestions.includes(t)));if(0===e.length)return this.usedQuestions.length=0,this.questions[i.Math.Between(0,this.questions.length-1)];const t=e[i.Math.Between(0,e.length-1)];return this.usedQuestions.push(this.questions.indexOf(t)),t}}class V extends i.Scene{constructor(){super("GameUI"),t(this,"dialog"),t(this,"quizDialog")}create(){this.dialog=this.add.existing(new L(this)),this.quizDialog=this.add.existing(new R(this)),this.scene.get("Game").events.on("showDialog",((e,t)=>{this.dialog.showDialog(e,t)})),this.scene.get("Game").events.on("hideDialog",(()=>{this.dialog.hideDialog()})),this.scene.get("Game").events.on("showQuizDialog",(()=>{this.quizDialog.showQuizDialog()})),this.scene.get("Game").events.on("hideQuizDialog",(()=>{this.quizDialog.hideDialog()}))}update(e,t){}}const Y={title:n.gameTitle,type:Phaser.AUTO,width:n.gameWidth,height:n.gameHeight,backgroundColor:"#ffffff",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[s,u,B,V,F],physics:{default:"arcade",arcade:{debug:!1}},pixelArt:!0};new i.Game(Y);
